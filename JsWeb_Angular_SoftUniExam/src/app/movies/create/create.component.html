<div class="form-container">
    <h2>Add New Movie Discussion</h2>

    <form [formGroup]="movieForm" (ngSubmit)="onSubmit()">
        <div class="form-group">
            <label for="title">Movie Title</label>
            <input type="text" id="title" formControlName="title">
            <div class="error" *ngIf="movieForm.get('title')?.touched && movieForm.get('title')?.errors?.['required']">
                Title is required
            </div>
        </div>

        <div class="form-group">
            <label for="director">Director</label>
            <input type="text" id="director" formControlName="director">
            <div class="error"
                *ngIf="movieForm.get('director')?.touched && movieForm.get('director')?.errors?.['required']">
                Director is required
            </div>
        </div>

        <div class="form-group">
            <label for="year">Year</label>
            <input type="number" id="year" formControlName="year">
            <div class="error" *ngIf="movieForm.get('year')?.touched && movieForm.get('year')?.errors?.['required']">
                Year is required
            </div>
            <div class="error"
                *ngIf="movieForm.get('year')?.touched && (movieForm.get('year')?.errors?.['min'] || movieForm.get('year')?.errors?.['max'])">
                Year must be between 1888 and current year
            </div>
        </div>

        <div class="form-group">
            <label for="genre">Genre</label>
            <select multiple id="genre" formControlName="genre">
                <option value="Action">Action</option>
                <option value="Comedy">Comedy</option>
                <option value="Drama">Drama</option>
                <option value="Horror">Horror</option>
                <option value="Sci-Fi">Sci-Fi</option>
                <option value="Thriller">Thriller</option>
            </select>
            <div class="error" *ngIf="movieForm.get('genre')?.touched && movieForm.get('genre')?.errors?.['required']">
                Please select at least one genre
            </div>
        </div>

        <div class="form-group">
            <label for="poster">Poster URL</label>
            <input type="url" id="poster" formControlName="poster">
            <div class="error"
                *ngIf="movieForm.get('poster')?.touched && movieForm.get('poster')?.errors?.['required']">
                Poster URL is required
            </div>
            <div class="error" *ngIf="movieForm.get('poster')?.touched && movieForm.get('poster')?.errors?.['pattern']">
                Please enter a valid URL (e.g., https://example.com/image.jpg)
            </div>
        </div>

        <div class="form-group">
            <label for="plot">Plot</label>
            <textarea id="plot" formControlName="plot" rows="4"></textarea>
            <div class="error" *ngIf="movieForm.get('plot')?.touched && movieForm.get('plot')?.errors?.['required']">
                Plot is required
            </div>
            <div class="error" *ngIf="movieForm.get('plot')?.touched && movieForm.get('plot')?.errors?.['minlength']">
                Plot must be at least 50 characters
            </div>
        </div>

        <button type="submit" [disabled]="movieForm.invalid" class="auth-button">Create Movie Discussion</button>
        <p class="error-messages">{{errorMessage}}</p>
    </form>
</div>